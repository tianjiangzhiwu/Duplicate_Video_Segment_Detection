# 视频重复片段检测工具 - 更新说明

## 新增功能

### 1. 缩略图预览增加
- 从原来的3个缩略图增加到5个缩略图
- 更全面地展示重复片段的内容
- 便于更准确地人工验证重复片段

### 2. 删除指南生成功能
- 自动生成视频删除指南，帮助用户决定保留哪个视频
- 基于视频分辨率判断，优先保留高质量视频
- 提供具体的删除时间范围建议

## 使用方法

### 完整流程
1. 将视频文件放入指定目录
2. 运行主程序: `python main.py`
3. 程序会自动执行:
   - 特征提取
   - 构建索引
   - 搜索重复片段
   - 生成报告
   - 生成删除指南

### 生成单独的删除指南
如果你想在检测完成后单独生成删除指南，可以运行:
```bash
python generate_deletion_guide.py
```

## 删除指南说明

删除指南会分析所有重复片段，然后：
1. 比较重复视频的分辨率
2. 优先建议保留高分辨率的视频
3. 当两个视频分辨率相同时，会按字典序保留一个
4. 确保不会对同一对重复视频进行重复删除操作
5. 提供具体的时间段，指示应该从哪个视频中删除哪些片段
6. 生成JSON和TXT两种格式的指南文件

## 配置选项

你可以在 `config.py` 中调整以下参数：
- `SIMILARITY_THRESHOLD`: 相似度阈值，值越大越严格
- `MIN_DUPLICATE_DURATION`: 最小重复片段时长，避免检测太短的重复片段

## 输出文件

运行后会在 `output/` 目录下生成：
- `report.html`: 可视化报告，包含5个缩略图预览
- `duplicates.json`: 重复片段详细数据
- `deletion_guide.txt`: 删除指南（文本格式）

## 注意事项

1. 程序会自动检测是否安装了所需的依赖库
2. 如果有GPU支持，处理速度会更快
3. 生成的删除指南仅作参考，最终删除决策由用户决定
4. 建议在删除视频前先备份重要数据